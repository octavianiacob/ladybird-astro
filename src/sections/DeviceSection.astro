---
import TabToggle from "../components/TabToggle.astro";
import SectionLayout from "../layouts/SectionLayout.astro";
import LaptopSection from "./LaptopSection.astro";
import PhoneSection from "./PhoneSection.astro";
const tabItems = ["Patients", "Practices"];
---

<script>
	// if isIOS, add --isIOS to classname

	import { isIOS } from "../utils/helpers";

	const PhoneSection = document.querySelector(".PhoneSection")!;
	if (isIOS()) {
		PhoneSection.classList.add("PhoneSection--isIOS");
	}
</script>

<SectionLayout className="DeviceSectionWrapper">
	<div class="DeviceSection" id="DeviceSection">
		<div class="DeviceSection__top">
			<TabToggle tabItems={tabItems} />
		</div>
		<div class="DeviceSection__mainWrap">
			<div class="DeviceSection__main">
				<div class="PhoneSection">
					<PhoneSection />
				</div>
				<div class="LaptopSection">
					<LaptopSection />
				</div>
			</div>
		</div>
	</div>
</SectionLayout>

<style lang="scss">
	.DeviceSection {
		background-color: #ffffff;
		width: 100vw;
		// height: clamp(0px, 350vh, 3072px); // Ensure enough space for scrolling
		// height: 200vh; // Ensure enough space for scrolling
		// height: 320vh; // Ensure enough space for scrolling
		height: 400vh; // Ensure enough space for scrolling
		overflow: hidden;

		&__top {
			position: sticky;
			top: 0;
			z-index: 10;
			background-color: #ffffff;

			display: grid;
			place-items: center;
			padding: 3rem 0;
		}

		&__mainWrap {
			height: 100vh;
			overflow: hidden;
		}

		&__main {
			display: flex;
			flex-direction: column;
			align-items: center;

			position: relative;
			width: 100%;

			// overflow-y: auto;
		}

		.PhoneSection,
		.LaptopSection {
			width: 100%;
		}

		.PhoneSection {
			opacity: 1;

			display: grid;
			place-items: center;
			height: calc(100vh - 180px);
		}
		.LaptopSection {
			// opacity: 0;
			// transform: translateY(100%);

			display: grid;
			place-items: center;
			height: calc(100dvh - 180px);
		}
	}

	// if it's ios
	@media (max-width: 768px) and (pointer: coarse) {
		.DeviceSection {
			height: 280vh; // Ensure enough space for scrolling
			&__top {
				padding: 2.5rem 0;
			}

			.PhoneSection {
				display: flex;
				flex-direction: column;
				align-items: center;
			}

			.PhoneSection,
			.LaptopSection {
				height: calc(100vh - 130px);
			}

			.PhoneSection--isIOS {
				// transform: translateY(-20px);
				// background-color: red;
			}
		}
	}
</style>
